<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Programme EntraÃ®nement - Mathis</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg-color: #121212;
      --text-color: #f0f0f0;
      --box-color: #1e1e1e;
      --accent-color: #00d4ff;
    }
    body.light {
      --bg-color: #f0f0f0;
      --text-color: #121212;
      --box-color: #ffffff;
      --accent-color: #0077cc;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: var(--bg-color);
      color: var(--text-color);
      padding: 0 10px;
      transition: background 0.3s, color 0.3s;
    }
    h1, h2 {
      text-align: center;
      color: var(--accent-color);
    }
    .day {
      background: var(--box-color);
      border: 1px solid #333;
      border-radius: 10px;
      margin: 10px 0;
      padding: 10px;
    }
    .exercise {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      margin: 8px 0;
    }
    input[type="text"],
    input[type="number"] {
      padding: 5px;
      border: none;
      border-radius: 5px;
      width: 30%;
      background: #333;
      color: white;
    }
    label {
      flex: 1;
      min-width: 100px;
    }
    .checkbox {
      transform: scale(1.3);
    }
    .save {
      text-align: center;
      margin-top: 20px;
    }
    button {
      padding: 10px 20px;
      background: var(--accent-color);
      border: none;
      border-radius: 10px;
      color: var(--bg-color);
      font-weight: bold;
      cursor: pointer;
      margin: 5px;
    }
    canvas {
      background: #fff;
      border-radius: 10px;
      padding: 10px;
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      display: block;
    }
    @media (max-width: 600px) {
      .exercise {
        flex-direction: column;
        align-items: flex-start;
      }
      input[type="text"],
      input[type="number"] {
        width: 100%;
      }
    }
  </style>
</head>
<body>

<h1>EntraÃ®nement Hebdo - Mathis</h1>
<div class="save">
  <button onclick="saveData()">ðŸ’¾ Sauvegarder</button>
  <button onclick="toggleTheme()">ðŸŒ“ ThÃ¨me</button>
  <button onclick="updateGraph()">ðŸ“Š Voir Graphique</button>
</div>
<div id="programme"></div>
<h2>Progression Hebdo (Total reps)</h2>
<canvas id="progressChart" height="200"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const weekData = {
  "Lundi": [
    { exo: "Tractions lestÃ©es", poids: 10, reps: 5 },
    { exo: "Dips lestÃ©s", poids: 10, reps: 6 },
    { exo: "Pompes sac Ã  dos", poids: 8, reps: 10 }
  ],
  "Mardi": [
    { exo: "Sprint 30m", poids: 0, reps: 6 },
    { exo: "Planche", poids: 0, reps: 3 },
    { exo: "Pompes tempo", poids: 0, reps: 10 }
  ],
  "Mercredi": [
    { exo: "Tractions", poids: 0, reps: 10 },
    { exo: "Dips", poids: 0, reps: 10 },
    { exo: "Pompes", poids: 0, reps: 10 }
  ],
  "Jeudi": [
    { exo: "Ã‰tirements dynamiques", poids: 0, reps: 15 },
    { exo: "Planche", poids: 0, reps: 2 },
    { exo: "Marche / VÃ©lo", poids: 0, reps: 30 }
  ],
  "Vendredi": [
    { exo: "Tractions lestÃ©es", poids: 10, reps: 4 },
    { exo: "Dips lestÃ©s", poids: 10, reps: 5 },
    { exo: "Pompes lestÃ©es", poids: 8, reps: 15 }
  ],
  "Samedi": [
    { exo: "Tractions", poids: 0, reps: 10 },
    { exo: "Dips", poids: 0, reps: 10 },
    { exo: "Pompes", poids: 0, reps: 10 },
    { exo: "Squats", poids: 0, reps: 50 }
  ],
  "Dimanche": [
    { exo: "Repos complet", poids: 0, reps: 0 }
  ]
};

function loadData() {
  const saved = localStorage.getItem("programmeMathis");
  return saved ? JSON.parse(saved) : weekData;
}

function saveData() {
  const data = {};
  document.querySelectorAll(".day").forEach(day => {
    const name = day.getAttribute("data-day");
    data[name] = [];
    day.querySelectorAll(".exercise").forEach(ex => {
      const exo = ex.querySelector(".exo").value;
      const poids = parseFloat(ex.querySelector(".poids").value);
      const reps = parseInt(ex.querySelector(".reps").value);
      const checked = ex.querySelector(".check").checked;
      data[name].push({ exo, poids, reps, checked });
    });
  });
  localStorage.setItem("programmeMathis", JSON.stringify(data));
  alert("ðŸ’¾ DonnÃ©es enregistrÃ©es !");
}

function renderProgramme() {
  const programmeDiv = document.getElementById("programme");
  const data = loadData();
  for (const day in data) {
    const dayDiv = document.createElement("div");
    dayDiv.className = "day";
    dayDiv.setAttribute("data-day", day);
    const title = document.createElement("h2");
    title.textContent = day;
    dayDiv.appendChild(title);
    data[day].forEach((e, i) => {
      const div = document.createElement("div");
      div.className = "exercise";
      div.innerHTML = `
        <input type="text" class="exo" value="${e.exo}">
        <input type="number" class="poids" value="${e.poids}" min="0" step="1">
        <input type="number" class="reps" value="${e.reps}" min="0" step="1">
        <input type="checkbox" class="check checkbox" ${e.checked ? "checked" : ""}>
      `;
      dayDiv.appendChild(div);
    });
    programmeDiv.appendChild(dayDiv);
  }
}

function toggleTheme() {
  document.body.classList.toggle("light");
}

function updateGraph() {
  const data = loadData();
  const days = Object.keys(data);
  const totalReps = days.map(day =>
    data[day].reduce((sum, e) => sum + (e.checked ? e.reps : 0), 0)
  );

  if (window.repChart) window.repChart.destroy();
  const ctx = document.getElementById("progressChart").getContext("2d");
  window.repChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: days,
      datasets: [{
        label: 'Total de rÃ©pÃ©titions validÃ©es',
        data: totalReps,
        backgroundColor: 'rgba(0, 212, 255, 0.6)',
        borderColor: '#00d4ff',
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
}

renderProgramme();
</script>
</body>
</html>