<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Programme Entraînement</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg-color: #121212;
      --text-color: #f0f0f0;
      --box-color: #1e1e1e;
      --accent-color: #00d4ff;
    }
    body.light {
      --bg-color: #f0f0f0;
      --text-color: #121212;
      --box-color: #ffffff;
      --accent-color: #0077cc;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      transition: all 0.3s ease;
    }
    header {
      background: var(--box-color);
      padding: 20px;
      text-align: center;
    }
    nav {
      display: flex;
      justify-content: space-around;
      background: var(--box-color);
      padding: 10px;
      border-bottom: 1px solid #333;
    }
    nav a {
      text-decoration: none;
      color: var(--text-color);
      font-weight: bold;
      font-size: 1.1em;
    }
    .container {
      padding: 20px;
    }
    .day {
      background: var(--box-color);
      border-radius: 10px;
      margin: 10px 0;
      padding: 10px;
    }
    .exercise {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
      margin: 10px 0;
    }
    .exercise label {
      flex: 1;
      min-width: 100px;
    }
    .exercise input {
      padding: 5px;
      border-radius: 5px;
      border: none;
      background: #333;
      color: white;
      width: 80px;
    }
    .save-btn, .theme-btn {
      background: var(--accent-color);
      color: var(--bg-color);
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      cursor: pointer;
      margin: 10px 0;
    }
    .theme-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      padding: 5px 10px;
      font-size: 0.8em;
      border-radius: 20px;
    }
    canvas {
      width: 100%;
      max-width: 600px;
      background: white;
      border-radius: 10px;
      margin: 20px auto;
      display: block;
    }
    .hero {
      background: var(--accent-color);
      color: var(--bg-color);
      padding: 30px 20px;
      text-align: center;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    .hero h2 {
      margin: 0 0 10px;
    }
    .hero p {
      font-size: 1.1em;
    }
  </style>
</head>
<body>
  <header>
    <h1>Programme d'Entraînement</h1>
    <button class="theme-btn" onclick="toggleTheme()">🌗</button>
  </header>
  <nav>
    <a href="#home" onclick="showPage('home')">🏠 Accueil</a>
    <a href="#suivi" onclick="showPage('suivi')">📋 Suivi</a>
    <a href="#progress" onclick="showPage('progress')">📈 Progression</a>
  </nav>

  <!-- Accueil -->
  <div class="container" id="home">
    <div class="hero">
      <h2>Bienvenue dans ton app d'entraînement, Mathis 💪</h2>
      <p>Transforme ta routine. Suis ton évolution. Deviens inarrêtable.</p>
    </div>
    <p>👋 Utilise cette application pour :</p>
    <ul>
      <li>📅 Visualiser ton planning hebdo</li>
      <li>✏️ Modifier exercices, poids, reps & séries</li>
      <li>📊 Suivre ta progression avec des graphiques</li>
    </ul>
    <p>Active le mode clair 🌞 ou sombre 🌙 avec le bouton en haut à droite.</p>
  </div>

  <!-- Suivi -->
  <div class="container" id="suivi" style="display:none">
    <h2>Suivi Hebdomadaire</h2>
    <div id="programme"></div>
    <button class="save-btn" onclick="saveData()">💾 Sauvegarder</button>
  </div>

  <!-- Progression -->
  <div class="container" id="progress" style="display:none">
    <h2>Graphique de Progression</h2>
    <canvas id="progressChart"></canvas>
    <button class="save-btn" onclick="updateGraph()">🔄 Mettre à jour</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const weekData = {
      "Lundi": [
        { exo: "Tractions lestées", poids: 10, reps: 5, series: 5 },
        { exo: "Dips lestés", poids: 10, reps: 6, series: 5 }
      ],
      "Mardi": [
        { exo: "Sprint 30m", poids: 0, reps: 6, series: 3 },
        { exo: "Planche", poids: 0, reps: 3, series: 1 }
      ],
      "Mercredi": [
        { exo: "Tractions", poids: 0, reps: 10, series: 4 },
        { exo: "Pompes", poids: 0, reps: 15, series: 4 }
      ],
      "Jeudi": [
        { exo: "Pompes lestées", poids: 10, reps: 8, series: 5 },
        { exo: "Dips", poids: 0, reps: 12, series: 5 }
      ],
      "Vendredi": [
        { exo: "Course 3 km", poids: 0, reps: 1, series: 1 },
        { exo: "Gainage", poids: 0, reps: 3, series: 1 }
      ],
      "Samedi": [
        { exo: "Tractions lestées", poids: 10, reps: 5, series: 5 },
        { exo: "Pompes", poids: 0, reps: 20, series: 4 }
      ],
      "Dimanche": [
        { exo: "Repos actif", poids: 0, reps: 1, series: 1 }
      ]
    };

    function toggleTheme() {
      document.body.classList.toggle("light");
    }

    function showPage(id) {
      document.querySelectorAll('.container').forEach(div => div.style.display = 'none');
      document.getElementById(id).style.display = 'block';
    }

    function renderProgramme() {
      const saved = localStorage.getItem("programmeData");
      const data = saved ? JSON.parse(saved) : weekData;
      const container = document.getElementById("programme");
      container.innerHTML = "";
      for (const day in data) {
        const box = document.createElement("div");
        box.className = "day";
        box.innerHTML = `<h3>${day}</h3>`;
        data[day].forEach((e, i) => {
          box.innerHTML += `
            <div class="exercise">
              <label>Exercice:</label>
              <input type="text" class="exo" value="${e.exo}">
              <label>Poids (kg):</label>
              <input type="number" class="poids" value="${e.poids}">
              <label>Répétitions:</label>
              <input type="number" class="reps" value="${e.reps}">
              <label>Séries:</label>
              <input type="number" class="series" value="${e.series}">
            </div>`;
        });
        container.appendChild(box);
      }
    }

    function saveData() {
      const days = document.querySelectorAll('.day');
      const data = {};
      days.forEach(dayBox => {
        const dayName = dayBox.querySelector('h3').innerText;
        const exercises = [];
        dayBox.querySelectorAll('.exercise').forEach(exDiv => {
          const exo = exDiv.querySelector('.exo').value;
          const poids = parseInt(exDiv.querySelector('.poids').value);
          const reps = parseInt(exDiv.querySelector('.reps').value);
          const series = parseInt(exDiv.querySelector('.series').value);
          exercises.push({ exo, poids, reps, series });
        });
        data[dayName] = exercises;
      });
      localStorage.setItem("programmeData", JSON.stringify(data));
      alert("✅ Données enregistrées !");
    }

    function updateGraph() {
      const saved = localStorage.getItem("programmeData");
      const data = saved ? JSON.parse(saved) : weekData;
      const labels = Object.keys(data);
      const values = labels.map(d => data[d].reduce((sum, e) => sum + (e.reps * e.series), 0));

      const ctx = document.getElementById('progressChart').getContext('2d');
      if (window.repChart) window.repChart.destroy();
      window.repChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            label: 'Total de répétitions (reps x séries)',
            data: values,
            backgroundColor: 'rgba(0, 212, 255, 0.6)',
            borderColor: '#00d4ff',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: { beginAtZero: true }
          }
        }
      });
    }

    renderProgramme();
  </script>
</body>
</html>